{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Tasks"
    },
    "designerId": "2733923a-f012-4fc8-8e51-034b2e4115e3",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "tasklist",
                "designer|targetType": "Ext.dataview.List",
                "fn": "select",
                "implHandler": [
                    "this.getTaskView().push({",
                    "    xtype: 'taskdetails',",
                    "    title: 'Viewing Task',",
                    "    data: record",
                    "});",
                    "",
                    "this.getAddButton().hide();",
                    "this.getEditButton().show();",
                    "this.getDeleteButton().show();",
                    "",
                    "this.selectedRecord = record;"
                ],
                "name": "itemtap"
            },
            "name": "select",
            "designerId": "7735ae5d-92c3-496c-b2f6-c356727ce4f8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "taskview #editButton",
                "designer|params": [
                    "target"
                ],
                "designer|targetType": null,
                "fn": "edit",
                "implHandler": [
                    "var taskView = this.getTaskView();",
                    "",
                    "// Navigate to form",
                    "taskView.push({",
                    "    xtype: 'taskform',",
                    "    title: 'Edit Task'",
                    "});",
                    "",
                    "this.getEditButton().hide();",
                    "",
                    "this.getTaskForm().setRecord(this.selectedRecord);"
                ],
                "name": "tap"
            },
            "name": "edit",
            "designerId": "c22ef67f-57dd-4d84-be23-5cc6b3d25fad"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "taskview #addButton",
                "designer|targetType": "Ext.Button",
                "fn": "add",
                "implHandler": [
                    "this.getMainView().push({",
                    "    xtype: 'taskform',",
                    "    title: 'Add Task'",
                    "});",
                    "",
                    "this.getAddButton().hide();"
                ],
                "name": "tap"
            },
            "name": "add",
            "designerId": "4f84813c-6e46-4fe3-b20d-94176fe522ca"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "taskview #saveButton",
                "designer|targetType": "Ext.Button",
                "fn": "save",
                "implHandler": [
                    "// Build up the model's data",
                    "var fields = this.getTaskFormField().getFieldsAsArray(),",
                    "    data = {};",
                    "Ext.each(fields, function(field) {",
                    "    var key = field.getName(),",
                    "        value = field.getValue();",
                    "    data[key] = value;",
                    "});",
                    "",
                    "// Save the model's data",
                    "var mainView = this.getMainView(),",
                    "    record = mainView.getRecord(),",
                    "    store = Ext.getStore('Tasks');",
                    "if (record) {",
                    "    record.set(data);",
                    "    mainView.setRecord(null);",
                    "} else {",
                    "    store.add(data);",
                    "}",
                    "store.sort();",
                    "",
                    "this.deleteButton().hide();",
                    "this.getAddButton().show();",
                    "",
                    "// Navigate back to list",
                    "this.getMainView().pop();"
                ],
                "name": "tap"
            },
            "name": "save",
            "designerId": "5878c17a-f4d1-41df-9b54-9bb9f34dfdd1"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "taskview #deleteButton",
                "designer|targetType": "Ext.Button",
                "fn": "remove",
                "implHandler": [
                    "var me = this,\r",
                    "    title = 'Delete',\r",
                    "    message = 'Are you sure you want to delete this task?';\r",
                    "\r",
                    "Ext.Msg.confirm(title, message, function(response) {\r",
                    "    if (response == 'yes') {\r",
                    "\r",
                    "\t\tvar mainView = me.getMainView(),\r",
                    "\t\ttasks = Ext.getStore('Tasks'),\r",
                    "\t\ttask = mainView.getRecord();\r",
                    "\r",
                    "\t\ttasks.remove(task);\r",
                    "\r",
                    "\t\t// Navigate back to list\r",
                    "\t\tmainView.pop();\r",
                    "\r",
                    "    }\r",
                    "});"
                ],
                "name": "tap"
            },
            "name": "remove",
            "designerId": "2b137530-1622-48a6-bbbd-1c489f42864e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "navigationview",
                "designer|targetType": "Ext.navigation.View",
                "fn": "onPush",
                "name": "push"
            },
            "name": "onPush",
            "designerId": "5893f462-4058-4d0d-b20d-013078f0a14c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "navigationview",
                "designer|targetType": "Ext.navigation.View",
                "fn": "onPop",
                "name": "pop"
            },
            "name": "onPop",
            "designerId": "6139f148-13ec-4148-a222-baf4ff340355"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "taskView",
                "selector": "taskview"
            },
            "name": "taskView",
            "designerId": "359761db-20d2-41e7-b6fe-c0629136513f"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "taskForm",
                "selector": "taskform"
            },
            "name": "taskForm",
            "designerId": "3cd1bab9-a06d-4473-acc2-4e87a3f5ba06"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "taskDetails",
                "selector": "taskdetails"
            },
            "name": "taskDetails",
            "designerId": "59e096d1-9fb5-41c9-8500-87d7fab27e51"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "fieldset",
                "selector": "taskform fieldset"
            },
            "name": "fieldset",
            "designerId": "0771fd20-d311-4473-83d0-c276d7e06ff6"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "addButton",
                "selector": "taskview #addButton"
            },
            "name": "addButton",
            "designerId": "3e97ad92-d279-4203-972b-358b34dd910d"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "editButton",
                "selector": "taskview #editButton"
            },
            "name": "editButton",
            "designerId": "6a8ca3a5-48b4-4c2b-a207-f2a312f116c7"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "deleteButton",
                "selector": "taskview #deleteButton"
            },
            "name": "deleteButton",
            "designerId": "56a96f95-7521-4681-a72d-c8763e227ef6"
        }
    ]
}